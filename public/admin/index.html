<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Easy Forty â€” Admin</title>
  <style>body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',sans-serif;background:#0b0c0f;color:#e6e8ec;margin:0;padding:24px}
  textarea,input,button{width:100%;padding:10px;margin:8px 0;border-radius:10px;border:1px solid #273043;background:#0e131a;color:#e5e7eb}
  .row{display:grid;gap:14px;grid-template-columns:1fr 160px} .row button{margin-top:30px}
  pre{white-space:pre-wrap;background:#0e131a;border:1px solid #273043;padding:10px;border-radius:10px}
  </style>
</head>
<body>
  <h1>Admin</h1>
  <p>Paste your referral links JSON below and click Seed. Use the same Admin Key you set in Cloudflare.</p>
  <div class="row">
    <textarea id="json" rows="10" placeholder='[{"url":"https://acorns.com/invite/abc123","quota":2,"note":"Oct promo"},{"url":"https://acorns.com/invite/def456","quota":3}]'></textarea>
    <div>
      <label>Admin Key</label>
      <input id="key" type="text" placeholder="ADMIN_KEY">
      <button id="seed">Seed Links</button>
    </div>
  </div>
  <h2>Stats</h2>
  <pre id="stats">(none yet)</pre>
<script>
async function load(){
  const key = document.getElementById('key').value.trim();
  const res = await fetch('/api/admin/stats', { headers: {'X-Admin-Key': key || ''}});
  document.getElementById('stats').textContent = await res.text();
}
document.getElementById('seed').onclick = async ()=>{
  const key = document.getElementById('key').value.trim();
  try{
    const res = await fetch('/api/admin/seed', { method:'POST', headers: {'Content-Type':'application/json','X-Admin-Key': key}, body: document.getElementById('json').value });
    alert(await res.text());
  }catch(e){ alert(e.message); }
  load();
};
load();
</script>
</body>
</html>
